# Sistem Administrasi GJK dan GKM - Setup Guide

## Deskripsi Aplikasi

Sistem web-based untuk otomatisasi administrasi GJK (Gugus Jaminan Kualitas) dan GKM (Gugus Kendali Mutu) Fakultas Vokasi dengan fitur monitoring RPS, materi, reminder otomatis, dan pelaporan berbasis AI.

## Persyaratan Sistem

- PHP 8.1 atau lebih tinggi
- MySQL 8.0 atau PostgreSQL 12+
- Composer
- Node.js 16+ (untuk asset compilation)
- Laravel 10 atau lebih tinggi

## Instalasi Langkah-demi-Langkah

### 1. Clone Repository dan Install Dependencies

```bash
cd sistem-gjk-gkm
composer install
npm install
```

### 2. Setup Environment

```bash
cp .env.example .env
php artisan key:generate
```

Konfigurasi database di file `.env`:
```
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=sistem_gjk_gkm
DB_USERNAME=root
DB_PASSWORD=
```

### 3. Jalankan Migrasi

```bash
php artisan migrate
php artisan db:seed
```

### 4. Build Assets

```bash
npm run build
# atau untuk development dengan watch:
npm run dev
```

### 5. Start Server

```bash
php artisan serve
```

Aplikasi akan berjalan di `http://localhost:8000`

## Struktur Direktori

```
├── app/
│   ├── Models/              # Model-model database
│   ├── Http/
│   │   ├── Controllers/     # Controllers untuk GKM dan GJM
│   │   └── Middleware/      # Middleware authentication & role
│   └── Jobs/                # Queue jobs untuk reminder
├── database/
│   ├── migrations/          # Database migrations
│   └── seeders/             # Data seeders
├── resources/
│   └── views/
│       ├── layouts/         # Layout templates
│       ├── gkm/             # Views untuk GKM
│       ├── gjm/             # Views untuk GJM
│       └── auth/            # Authentication views
├── routes/
│   └── web.php              # Web routes
└── public/
    ├── css/
    └── js/
```

## Fitur Utama

### Untuk GKM (Gugus Kendali Mutu)

1. **Dashboard GKM**
   - Statistik status upload materi dan RPS
   - Status reminder terkirim
   - Status kuisioner

2. **Data Master**
   - Kelola data dosen pengajar
   - Kelola data mata kuliah per ajaran
   - Kelola template laporan

3. **Monitoring RPS & Materi**
   - Monitoring status upload RPS dan materi per dosen
   - Cek list RPS dan materi
   - History pengiriman reminder

4. **Monitoring Perkuliahan**
   - Reminder untuk perwalian
   - Reminder upload materi di CIS
   - Reminder kaprodi review soal

5. **Pelaporan**
   - Laporan hasil artefak perkuliahan
   - Laporan hasil kuisioner (generated by AI)

6. **Reminder Agent**
   - Pengaturan jadwal reminder otomatis
   - Log pengiriman email

### Untuk GJM (Gugus Jaminan Kualitas)

1. **Dashboard GJM**
   - Overview kepatuhan seluruh prodi
   - Temuan aktif
   - Diskusi kelas

2. **Rekap Laporan**
   - Grafik kepatuhan upload materi dan RPS
   - Data evaluasi per prodi

3. **Validasi & Verifikasi**
   - Approve laporan GKM
   - Berikan feedback/catatan

4. **Laporan GJM Fakultas**
   - Arsip laporan bulanan
   - Arsip laporan tahunan
   - Generate laporan otomatis

## Database Schema

### Tabel Utama

1. **users** - Data pengguna (GKM, GJM, Dosen)
2. **dosen** - Data detail dosen
3. **prodi** - Program studi
4. **matakuliah** - Mata kuliah
5. **ajaran** - Tahun akademik dan semester
6. **rps** - Rencana Pembelajaran Semester
7. **materi** - Materi perkuliahan
8. **monitoring** - Monitoring kepatuhan dosen
9. **reminder** - Reminder otomatis
10. **laporan_gkm** - Laporan GKM per prodi
11. **laporan_gjm** - Laporan GJM fakultas
12. **kuisioner** - Evaluasi dosen
13. **evaluasi_artefak** - Evaluasi RPS dan materi
14. **log_email** - Log pengiriman email
15. **jadwal_reminder** - Konfigurasi jadwal pengiriman

Lihat `DATABASE_SCHEMA.md` untuk dokumentasi lengkap.

## Authentication & Authorization

### Roles yang Tersedia

1. **GKM** - Gugus Kendali Mutu (per prodi)
2. **GJM** - Gugus Jaminan Kualitas (fakultas level)
3. **Dosen** - Pengajar

Middleware `CheckRole` melindungi routes berdasarkan role user.

### Login

- Email dan password yang valid
- Session-based authentication
- Password hashing dengan bcrypt

## API Endpoints

Routes tersedia di `routes/web.php`. Berikut beberapa endpoint utama:

### GKM Routes

```
GET    /gkm/dashboard                          - Dashboard GKM
GET    /gkm/data-master                        - Data Master
GET    /gkm/monitoring-rps                     - Monitoring RPS
GET    /gkm/monitoring-perkuliahan             - Monitoring Perkuliahan
GET    /gkm/pelaporan                          - Pelaporan
GET    /gkm/reminder-agent                     - Reminder Agent
```

### GJM Routes

```
GET    /gjm/dashboard                          - Dashboard GJM
GET    /gjm/recap-laporan                      - Recap Laporan
GET    /gjm/validasi-laporan                   - Validasi Laporan
GET    /gjm/laporan-gjm                        - Laporan GJM
```

## Fitur AI Integration

Sistem akan diintegrasikan dengan AI untuk:

1. **Generate Laporan Otomatis** - Menganalisis data monitoring dan kuisioner
2. **Predictive Analytics** - Prediksi kepatuhan berdasarkan trend
3. **Smart Recommendations** - Rekomendasi perbaikan

Implementasi menggunakan OpenAI API atau model lokal.

## Email Configuration

Setup untuk pengiriman reminder email di `.env`:

```
MAIL_DRIVER=smtp
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=465
MAIL_USERNAME=your_username
MAIL_PASSWORD=your_password
MAIL_ENCRYPTION=ssl
MAIL_FROM_ADDRESS=noreply@gjk-gkm.com
```

## Queue Jobs

Untuk pengiriman email reminder background:

```bash
# Start queue worker
php artisan queue:work

# Atau gunakan supervisor untuk production
```

## Testing

```bash
# Run unit tests
php artisan test

# Run specific test
php artisan test --filter=AuthTest
```

## Deployment

### Production Checklist

1. Update `.env` untuk production settings
2. Run `php artisan config:cache`
3. Run `php artisan route:cache`
4. Setup database backups
5. Configure error logging
6. Setup SSL certificate
7. Configure web server (Nginx/Apache)
8. Setup queue worker dengan supervisor

### Contoh Nginx Config

```nginx
server {
    listen 80;
    server_name your-domain.com;
    root /var/www/sistem-gjk-gkm/public;

    add_header X-Frame-Options "SAMEORIGIN";
    add_header X-Content-Type-Options "nosniff";

    index index.php;

    charset utf-8;

    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    location = /favicon.ico { access_log off; log_not_found off; }
    location = /robots.txt  { access_log off; log_not_found off; }

    error_page 404 /index.php;

    location ~ \.php$ {
        fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;
        fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;
        include fastcgi_params;
    }

    location ~ /\.(?!well-known).* {
        deny all;
    }
}
```

## Troubleshooting

### Migrasi gagal
- Pastikan database sudah dibuat
- Check database credentials di `.env`
- Run `php artisan migrate:fresh` untuk reset

### Assets tidak load
- Run `npm run build`
- Clear browser cache
- Check `public/` directory

### Email tidak terkirim
- Check mail configuration di `.env`
- Test dengan `php artisan tinker` → `Mail::raw('test', fn($m) => $m->to('test@test.com'))->send()`

## Support & Contact

Untuk bantuan atau pertanyaan:
- Email: support@gjk-gkm.com
- Dokumentasi: https://docs.gjk-gkm.com

## License

MIT License - Lihat LICENSE file untuk detail
